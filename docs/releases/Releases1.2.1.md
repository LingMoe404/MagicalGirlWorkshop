v1.2.1 - ✨ 魔法少女工坊 (Magical Girl Workshop) v1.2.1 - 绝对防御，洞悉未来

> **"为了守护世界的稳定性，我们重构了观测未来的方式。"**

**魔法少女工坊 v1.2.1** 是一次专注于 **稳定性** 与 **可观测性** 的重要更新。针对 AMD AMF 及部分复杂视频源（如带封面图的 MKV），我们引入了全新的 **三级探测策略**，确保炼成仪式绝不中断。同时，任务列表现在能实时显示 **压制速度** 与 **ETA**，让等待不再焦虑。

## 🎉 版本亮点 (Highlights)

*   **🛡️ 绝对防御 (Robust Detection)**: 引入“硬件 -> SVT -> AOM”三级探测回退机制。即使硬件探测失败（如驱动兼容性问题），也能自动无缝切换至 CPU 代理探测，彻底解决 `ab-av1` 崩溃问题。
*   **🎚️ 灵力微调 (Global Offset)**: 全面开放 QSV/NVENC/AMF 的“灵力偏移”调节。现在你可以针对 CPU 探测结果进行微调（默认 QSV -2 / NVENC -4 / AMF -6），精准把控最终画质。
*   **⚡ 全知全能 (Performance Monitor)**: 任务列表新增实时 **压制速度 (Speed)** 和 **剩余时间 (ETA)** 显示，任务完成后常驻显示耗时统计，一切尽在掌握。

## 🚀 更新日志 (Changelog)

*   [New] **探测重构**: 为所有硬件编码器引入三级探测策略。特别说明：AMD 模式将强制使用 CPU (SVT-AV1 -> AOM-AV1) 进行探测并换算参数。
*   [New] **灵力偏移**: 开放全平台 Offset 调节，支持自定义 CPU -> 硬件的参数换算。
*   [New] **性能监控**: UI 新增实时速度、ETA 及总耗时显示。
*   [Fix] **识别修复**: 修复输入文件包含 MJPEG 封面图导致 `ab-av1` 识别错误并崩溃的问题。
*   [Fix] **进度修复**: 修复极短视频或多音轨视频导致的进度条计算异常。
*   [Opt] **UI 优化**: 优化了文件列表布局，信息展示更清晰。

## ⚙️ 适格者要求 (Requirements)

*   **OS**: Windows 10 / 11 (推荐 Win11)
*   **GPU (三选一)**:
    *   🔵 **Intel**: Arc A380 / A750 / B580 或 Core Ultra 核显。
    *   🟢 **NVIDIA**: GeForce RTX 40 系列。
    *   🔴 **AMD**: Radeon RX 7000 系列或 RDNA 3 核显。
*   **Driver**: 请务必安装最新驱动以获得最佳兼容性。

## 📥 部署指南 (Installation)

### 方式一：下载正式版 (推荐)

1.  下载本页面下方的 `MagicalGirlWorkshop_v1.2.1.zip`。
2.  解压至任意目录。
3.  双击 `MagicalGirlWorkshop.exe` 即可直接使用 (已内置 FFmpeg, ab-av1 等核心组件，无需额外配置)。

### 方式二：源码运行 (Dev)

1.  **环境**: 推荐使用 `uv` 管理依赖 (`uv sync`)。
2.  **工具**: 需手动将 `ffmpeg.exe`, `ffprobe.exe`, `ab-av1.exe` 放入项目根目录下的 `tools/` 文件夹。
3.  **启动**: 运行 `uv run main.py`。

---
*“观测者啊，请见证这更加稳固的世界线吧！”*